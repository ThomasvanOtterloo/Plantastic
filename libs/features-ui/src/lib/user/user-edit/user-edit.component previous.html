<!-- <div *ngIf="!user">
  <fab-util-spinner></fab-util-spinner>
</div> -->

<div *ngIf="user">
  <div class="row">
    <div class="col-auto">
      <h1>User edit of create</h1>
    </div>
  </div>

  <form
    #userEditForm="ngForm"
    name="form"
    (ngSubmit)="userEditForm.form.valid && onSubmit()"
    novalidate
  >
    <div class="row">
      <div class="col">
        <div class="form-row">
          <!-- User name -->
          <div class="form-group col-sm-12 col-md-5 col-lg-6">
            <label for="firstName">User name</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="user.firstName"
              name="firstName"
              #firstName="ngModel"
              [ngClass]="{
                'is-invalid': firstName.invalid && firstName.touched
              }"
              required
              minlength="3"
            />
            <div
              *ngIf="firstName.invalid && firstName.touched"
              class="invalid-feedback"
            >
              <div *ngIf="firstName.errors?.['required']">
                User name is vereist.
              </div>
              <div *ngIf="firstName.errors?.['minlength']">
                User name moet ten minste 3 letters lang zijn.
              </div>
            </div>
          </div>

          <!-- User roles -->
          <div class="form-group col-sm-12 col-md-4 col-lg-4">
            <label class="mr-sm-2" for="user_roles">Roles</label>
            <select
              class="custom-select mr-sm-2"
              id="user_roles"
              name="userroles"
              [(ngModel)]="user.roles"
              #userroles="ngModel"
              required
            >
              <!--  -->
              <!-- <ng-container *ngIf="!roless || roless?.length === 0"> -->
              <!-- <option selected>Loading...</option> -->
              <!-- </ng-container> -->
              <!--  -->
              <!-- <ng-container *ngFor="let roles of roless"> -->
              <!-- <option [value]="roles.id"> -->
              <!-- {{ roles.name }} -->
              <!-- </option> -->
              <!-- </ng-container> -->
            </select>
          </div>

          <!-- User releaseyear -->
          <div class="form-group col-sm-12 col-md-3 col-lg-2">
            <label for="phoneNumber">phoneNumber</label>

            <input
              type="number"
              class="form-control"
              [(ngModel)]="user.phoneNumber"
              name="phoneNumber"
              #phoneNumber="ngModel"
              [ngClass]="{ 'is-invalid': phoneNumber.invalid }"
              required
              minlength="4"
            />

            <div *ngIf="phoneNumber.invalid" class="invalid-feedback">
              <div *ngIf="phoneNumber.errors?.['required']">
                Jaar is vereist.
              </div>
              <div *ngIf="phoneNumber.errors?.['minlength']">
                Jaar bestaat uit 4 cijfers.
              </div>
            </div>
          </div>

          <!-- User inTheatres -->
          <div class="form-group col-md-6">
            <label for="userInTheatres">Beschikbaarheid</label>
            <div class="form-group col-lg-12">
              <!--  -->
              <div class="custom-control custom-checkbox custom-control-inline">
                <input
                  type="checkbox"
                  id="in-theatres"
                  name="userInTheatres"
                  class="custom-control-input"
                  [(ngModel)]="user.isActive"
                  #userInTheatres="ngModel"
                  value="false"
                />
                <label class="custom-control-label" for="in-theatres"
                  >Nu in de bioscoop
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="col-auto">
            <button
              type="submit"
              class="btn btn-success"
              [disabled]="!userEditForm.valid"
            >
              Save
            </button>
            <button
              type="button"
              class="btn btn-outline-warning"
              routerLink=".."
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-outline-primary"
              (click)="debug = !debug"
              [attr.aria-expanded]="debug"
              aria-controls="collapseExample"
            >
              Toggle Debug
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-header featured">Let op!</div>
          <div class="card-body">
            <p class="card-text">
              In dit scherm kan de gebruiker een nieuwe User aanmaken of een
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <br />
        <div #collapse="ngbCollapse" [(ngbCollapse)]="!debug">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Debug info</h5>
              <p class="card-text">
                Hier zie je links de status van het user.name veld, en rechts de
                content van de user in het formulier. Zodra je wijzigingen in
                het formulier doorvoert, zie je in deze informatie de
                wijzigingen. Zo kun je de code aan de informatie linken.
              </p>
              <div class="row">
                <div class="col-auto">
                  <div class="card">
                    <div class="card-body">
                      <p>name.invalid = {{ firstName.invalid }}</p>
                      <p>name.touched = {{ firstName.touched }}</p>
                      <p>name.dirty = {{ firstName.dirty }}</p>
                      <p>name.pristine = {{ firstName.pristine }}</p>
                    </div>
                  </div>
                </div>
                <div class="col-auto">
                  <div class="card">
                    <div class="card-body">
                      <pre>{{ user | json }}</pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
